!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){e.exports=Vue},function(e,t,o){"use strict";var n=o(4);o.n(n).a},function(e,t){},function(e,t,o){"use strict";o.r(t);var n=o(0),s=o.n(n),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"keyboard-body",attrs:{id:"keyboard"}},[o("div",{staticClass:"keyboard-body-inner"},[e._m(0),e._v(" "),o("div",{staticClass:"reverb button",on:{click:function(t){e.reverb=!e.reverb}}},[e._v("Reverb: "+e._s(e.reverb?"on":"off"))]),e._v(" "),e._l(e.order,(function(t,n){return o("div",{key:n,class:"keyboard-container "+t.position},[o("div",{staticClass:"keyboard kb-black"},e._l(t.keys,(function(t,n){return o("key",{key:n,attrs:{color:"black",num:t,data:e.getKeys[t]},on:{"start-tone":e.startTone,"stop-tone":e.stopTone}})})),1),e._v(" "),o("div",{staticClass:"keyboard kb-white"},[o("div",{staticClass:"buttons"},[o("div",{class:"button noselect oct minus"+t.position,on:{click:function(o){return e.setOctave(-1,t.position)}}},[e._v("-")]),e._v(" "),o("div",{class:"button noselect oct display"+t.position},[e._v("Oct: "+e._s(e.currentOctave[t.position]+1))]),e._v(" "),o("div",{class:"button noselect oct plus"+t.position,on:{click:function(o){return e.setOctave(1,t.position)}}},[e._v("+")]),e._v(" "),o("div",{class:"button noselect vol minus"+t.position,on:{click:function(o){return e.setVolume(-1,t.position)}}},[e._v("-")]),e._v(" "),o("div",{class:"button noselect vol display"+t.position},[e._v("Vol: "+e._s(e.maxVol[t.position]))]),e._v(" "),o("div",{class:"button noselect vol plus"+t.position,on:{click:function(o){return e.setVolume(1,t.position)}}},[e._v("+")]),e._v(" "),o("div",{class:"button noselect wave "+("sine"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("sine",t.position)}}},[e._v("sine\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("square"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("square",t.position)}}},[e._v("square\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("sawtooth"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("sawtooth",t.position)}}},[e._v("sawtooth\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("triangle"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("triangle",t.position)}}},[e._v("triangle\n          ")])]),e._v(" "),e._l(t.keys,(function(t,n){return o("key",{key:n,attrs:{color:"white",num:t,data:e.getKeys[t]},on:{"start-tone":e.startTone,"stop-tone":e.stopTone}})}))],2)])}))],2),e._v(" "),e._m(1)])};r._withStripped=!0;var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.color===e.allData.color?o("div",{class:"key noselect"+(e.getPressed?" highlight":""),attrs:{id:e.getAllData.tone+e.getAllData.position,"data-color":e.getAllData.color,"data-keycode":e.num},on:{touchstart:function(t){return e.startTone(e.num,e.getAllData.position)},touchend:function(t){return e.stopTone(e.num)},touchmove:function(t){return e.stopTone(e.num)},mousedown:function(t){return e.startTone(e.num,e.getAllData.position)},mouseup:function(t){return e.stopTone(e.num)},mouseleave:function(t){return e.stopTone(e.num)}}},[o("span",{staticClass:"noselect"},[e._v(e._s(e.getAllData.name)),o("br"),e._v(e._s(e.getAllData.key))])]):e._e()};i._withStripped=!0;var a={props:{num:Number,data:{},color:String},data:function(){return{pressed:!1,allData:{tone:"",freq:0,color:"",key:"",name:"",step:0,position:"",pressed:!1}}},name:"key",created(){this.allData=this.$props.data},methods:{startTone(e,t){this.$emit("start-tone",e,t)},stopTone(e){this.$emit("stop-tone",e)}},computed:{getAllData(){return this.allData},getPressed(){return this.getAllData.pressed}}};o(1);function c(e,t,o,n,s,r,i,a){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=o,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(e,t){return c.call(t),p(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}var l=c(a,i,[],!1,null,null,null);l.options.__file="src/components/keyboard/Key.vue";var p=l.exports;o(2);const u={networkError:{},extend:function(e){function t(e){function t(e,t){let o,n=e.charCodeAt(t);return t<e.length&&(n>=65&&n<=90?o=n-65:n>=97&&n<=122?o=n-71:n>=48&&n<=57?o=n+4:43===n?o=62:47===n?o=63:61!==n&&console.log("base64 encountered unexpected character code: "+n)),o}if(0===e.length||e.length%4>0)return void console.log("base64 encountered unexpected length: "+e.length);let o,n=e.match(/[=]*$/)[0].length,s=3*e.length/4-n,r=new ArrayBuffer(s),i=new Uint8Array(r),a=[],c=0,l=0;for(;c<s;){for(o=0;o<4;o+=1)a[o]=t(e,l),l+=1;i[c]=4*a[0]+Math.floor(a[1]/16),c+=1,c<s&&(i[c]=a[1]%16*16+Math.floor(a[2]/4),c+=1),c<s&&(i[c]=a[2]%4*64+a[3],c+=1)}return r}function o(t,o,n){e.decodeAudioData(o,(function(e){console.log("Finished decoding audio data."),t.buffer=e,"function"==typeof n&&null!==e&&n(t)}),(function(e){console.log("Could not decode audio data: "+e)}))}e.createReverbFromBase64=function(n,s){let r=e.createConvolver();return o(r,t(n),s),r},e.createSourceFromBase64=function(n,s){let r=e.createBufferSource();return o(r,t(n),s),r},e.createReverbFromUrl=function(t,n){console.log("Downloading impulse response from "+t);let s=e.createConvolver(),r=new XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(console.log("Downloaded impulse response"),o(s,r.response,n))},r.onerror=function(e){console.log("There was an error receiving the response: "+e),u.networkError=e},r.responseType="arraybuffer",r.send(),s},e.createSourceFromUrl=function(t,n){console.log("Downloading sound from "+t);let s=e.createBufferSource(),r=new XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(console.log("Downloaded sound"),o(s,r.response,n))},r.onerror=function(e){console.log("There was an error receiving the response: "+e),u.networkError=e},r.responseType="arraybuffer",r.send(),s},e.createReverbFromBase64Url=function(n,s){console.log("Downloading base64 impulse response from "+n);let r=e.createConvolver(),i=new XMLHttpRequest;return i.open("GET",n,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(console.log("Downloaded impulse response"),o(r,t(i.response),s))},i.onerror=function(e){console.log("There was an error receiving the response: "+e),u.networkError=e},i.send(),r},e.createSourceFromBase64Url=function(n,s){console.log("Downloading base64 sound from "+n);let r=e.createBufferSource(),i=new XMLHttpRequest;return i.open("GET",n,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(console.log("Downloaded sound"),o(r,t(i.response),s))},i.onerror=function(e){console.log("There was an error receiving the response: "+e),u.networkError=e},i.send(),r}}};var d=c({name:"keyboard",components:{Key:p},data:function(){return{synth:{},synthSet:!1,reverbNode:{},osc:{},currentOctave:{top:3,bottom:2},maxVol:{top:5,bottom:5},waveForm:{top:"sine",bottom:"sine"},octaves:[55,110,220,440,880,1760,3520],order:[{position:"top",keys:[81,50,87,51,69,82,53,84,54,90,55,85,73,57,79,48,80,219]},{position:"bottom",keys:[89,83,88,68,67,86,71,66,72,78,74,77,188,76,190,186,189,16]}],reverb:!1,keys:{}}},created(){this.keys={89:{tone:"c4",freq:this.getFreq(-9,"bottom"),color:"white",key:"y",name:"c4",step:-9,position:"bottom",pressed:!1},83:{tone:"cis4",freq:this.getFreq(-8,"bottom"),color:"black",key:"s",name:"c4#",step:-8,position:"bottom",pressed:!1},88:{tone:"d4",freq:this.getFreq(-7,"bottom"),color:"white",key:"x",name:"d4",step:-7,position:"bottom",pressed:!1},68:{tone:"dis4",freq:this.getFreq(-6,"bottom"),color:"black",key:"d",name:"d4#",step:-6,position:"bottom",pressed:!1},67:{tone:"e4",freq:this.getFreq(-5,"bottom"),color:"white",key:"c",name:"e4",step:-5,position:"bottom",pressed:!1},86:{tone:"f4",freq:this.getFreq(-4,"bottom"),color:"white",key:"v",name:"f4",step:-4,position:"bottom",pressed:!1},71:{tone:"fis4",freq:this.getFreq(-3,"bottom"),color:"black",key:"g",name:"f4#",step:-3,position:"bottom",pressed:!1},66:{tone:"g4",freq:this.getFreq(-2,"bottom"),color:"white",key:"b",name:"g4",step:-2,position:"bottom",pressed:!1},72:{tone:"gis4",freq:this.getFreq(-1,"bottom"),color:"black",key:"h",name:"g4#",step:-1,position:"bottom",pressed:!1},78:{tone:"a4",freq:this.getFreq(0,"bottom"),color:"white",key:"n",name:"a4",step:0,position:"bottom",pressed:!1},74:{tone:"ais4",freq:this.getFreq(1,"bottom"),color:"black",key:"j",name:"a4#",step:1,position:"bottom",pressed:!1},77:{tone:"h4",freq:this.getFreq(2,"bottom"),color:"white",key:"m",name:"b4",step:2,position:"bottom",pressed:!1},188:{tone:"c5",freq:this.getFreq(3,"bottom"),color:"white",key:",",name:"c5",step:3,position:"bottom",pressed:!1},76:{tone:"cis5",freq:this.getFreq(4,"bottom"),color:"black",key:"l",name:"c5#",step:4,position:"bottom",pressed:!1},190:{tone:"d5",freq:this.getFreq(5,"bottom"),color:"white",key:".",name:"d5",step:5,position:"bottom",pressed:!1},186:{tone:"dis5",freq:this.getFreq(6,"bottom"),color:"black",key:"ö",name:"d5#",step:6,position:"bottom",pressed:!1},189:{tone:"e5",freq:this.getFreq(7,"bottom"),color:"white",key:"-",name:"e5",step:7,position:"bottom",pressed:!1},16:{tone:"f5",freq:this.getFreq(8,"bottom"),color:"white",key:"shift",name:"f5",step:8,position:"bottom",pressed:!1},81:{tone:"c4",freq:this.getFreq(-9,"top"),color:"white",key:"q",name:"c4",step:-9,position:"top",pressed:!1},50:{tone:"cis4",freq:this.getFreq(-8,"top"),color:"black",key:"2",name:"c4#",step:-8,position:"top",pressed:!1},87:{tone:"d4",freq:this.getFreq(-7,"top"),color:"white",key:"w",name:"d4",step:-7,position:"top",pressed:!1},51:{tone:"dis4",freq:this.getFreq(-6,"top"),color:"black",key:"3",name:"d4#",step:-6,position:"top",pressed:!1},69:{tone:"e4",freq:this.getFreq(-5,"top"),color:"white",key:"e",name:"e4",step:-5,position:"top",pressed:!1},82:{tone:"f4",freq:this.getFreq(-4,"top"),color:"white",key:"r",name:"f4",step:-4,position:"top",pressed:!1},53:{tone:"fis4",freq:this.getFreq(-3,"top"),color:"black",key:"5",name:"f4#",step:-3,position:"top",pressed:!1},84:{tone:"g4",freq:this.getFreq(-2,"top"),color:"white",key:"t",name:"g4",step:-2,position:"top",pressed:!1},54:{tone:"gis4",freq:this.getFreq(-1,"top"),color:"black",key:"6",name:"g4#",step:-1,position:"top",pressed:!1},90:{tone:"a4",freq:this.getFreq(0,"top"),color:"white",key:"z",name:"a4",step:0,position:"top",pressed:!1},55:{tone:"ais4",freq:this.getFreq(1,"top"),color:"black",key:"7",name:"a4#",step:1,position:"top",pressed:!1},85:{tone:"h4",freq:this.getFreq(2,"top"),color:"white",key:"u",name:"b4",step:2,position:"top",pressed:!1},73:{tone:"c5",freq:this.getFreq(3,"top"),color:"white",key:"i",name:"c5",step:3,position:"top",pressed:!1},57:{tone:"cis5",freq:this.getFreq(4,"top"),color:"black",key:"9",name:"c5#",step:4,position:"top",pressed:!1},79:{tone:"d5",freq:this.getFreq(5,"top"),color:"white",key:"o",name:"d5",step:5,position:"top",pressed:!1},48:{tone:"dis5",freq:this.getFreq(6,"top"),color:"black",key:"0",name:"d5#",step:6,position:"top",pressed:!1},80:{tone:"e5",freq:this.getFreq(7,"top"),color:"white",key:"p",name:"e5",step:7,position:"top",pressed:!1},219:{tone:"f5",freq:this.getFreq(8,"top"),color:"white",key:"ü",name:"f5",step:8,position:"top",pressed:!1}},document.addEventListener("keydown",e=>{let t=e.keyCode||e.which;void 0!==this.keys[t]&&this.startTone(t,this.keys[t].position)}),document.addEventListener("keyup",e=>{let t=e.keyCode||e.which;void 0!==this.keys[t]&&this.stopTone(t)})},methods:{setOctave(e,t){this.currentOctave[t]+e<0&&(this.currentOctave[t]=0),this.currentOctave[t]+e>6&&(this.currentOctave[t]=6),this.currentOctave[t]=this.currentOctave[t]+e;for(let e in this.keys){let o=this.keys[e];o.position===t&&(this.keys[e].freq=this.getFreq(o.step,t))}},setVolume(e,t){return this.maxVol[t]+e<1?1:this.maxVol[t]+e>10?10:void(this.maxVol[t]=this.maxVol[t]+e)},setWaveForm(e,t){this.waveForm[t]=e},stopTone(e){if(void 0===e)return;let t=this.osc[e];if("object"==typeof t){let o=this.synth.currentTime,n=t.osc;t.gain.gain.linearRampToValueAtTime(0,o+.01),n.stop(o+.02),this.osc[e]=void 0}void 0!==this.keys[e]&&(this.keys[e].pressed=!1)},startTone(e,t){if(!1===this.synthSet&&(this.synth=new(AudioContext||window.webkitAudioContext),u.extend(this.synth),this.reverbNode=this.synth.createReverbFromUrl("http://reverbjs.org/Library/HamiltonMausoleum.m4a",()=>{this.reverbNode.connect(this.synth.destination)}),this.synthSet=!0),"object"==typeof this.osc[e])return;let o={osc:this.synth.createOscillator(),gain:this.synth.createGain()};o.gain.gain.setValueAtTime(0,this.synth.currentTime),o.osc.type=this.waveForm[t],o.osc.frequency.setValueAtTime(this.keys[e].freq,this.synth.currentTime),o.osc.connect(o.gain),this.reverb?o.gain.connect(this.reverbNode):o.gain.connect(this.synth.destination),o.osc.start(),o.gain.gain.linearRampToValueAtTime(.1*this.maxVol[t],this.synth.currentTime+.01),this.osc[e]=o,void 0!==this.keys[e]&&(this.keys[e].pressed=!0)},getFreq(e,t){return parseInt(this.octaves[this.currentOctave[t]]*(2**(1/12))**e)}},computed:{getKeys(){return this.keys}}},r,[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"keyboard-hl"},[this._v("...play "),t("i",[this._v("away")]),this._v("!")])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",{staticClass:"footer"},[t("span",{staticClass:"footer-content"},[this._v("\n    created with vuejs by "),t("a",{attrs:{href:"https://github.com/snakedove"}},[this._v("github/snakedove")]),this._v(" | tested with typescript\n  ")])])}],!1,null,null,null);d.options.__file="src/components/Keyboard.vue";var h=d.exports;s.a.component("Keyboard",h)},function(e,t){}]);