!function(e){var t={};function o(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){e.exports=Vue},function(e,t,o){"use strict";var s=o(4);o.n(s).a},function(e,t,o){"use strict";o.r(t),o.d(t,"factor",(function(){return s})),o.d(t,"Keyboard",(function(){return n}));var s=Math.pow(2,1/12),n=function(){function e(){this.synth={},this.synthSet=!1,this.reverbNode={},this.osc={},this.currentOctave={top:3,bottom:2},this.maxVol={top:5,bottom:5},this.waveForm={top:"sine",bottom:"sine"},this.octaves=[55,110,220,440,880,1760,3520],this.order=[{position:"top",keys:[81,50,87,51,69,82,53,84,54,90,55,85,73,57,79,48,80,219]},{position:"bottom",keys:[89,83,88,68,67,86,71,66,72,78,74,77,188,76,190,186,189,16]}],this.reverb=!1,this.keys={89:{tone:"c4",freq:e.getFreq(-9,"bottom",this.currentOctave,this.octaves),color:"white",key:"y",name:"c4",step:-9,position:"bottom",pressed:!1},83:{tone:"cis4",freq:e.getFreq(-8,"bottom",this.currentOctave,this.octaves),color:"black",key:"s",name:"c4#",step:-8,position:"bottom",pressed:!1},88:{tone:"d4",freq:e.getFreq(-7,"bottom",this.currentOctave,this.octaves),color:"white",key:"x",name:"d4",step:-7,position:"bottom",pressed:!1},68:{tone:"dis4",freq:e.getFreq(-6,"bottom",this.currentOctave,this.octaves),color:"black",key:"d",name:"d4#",step:-6,position:"bottom",pressed:!1},67:{tone:"e4",freq:e.getFreq(-5,"bottom",this.currentOctave,this.octaves),color:"white",key:"c",name:"e4",step:-5,position:"bottom",pressed:!1},86:{tone:"f4",freq:e.getFreq(-4,"bottom",this.currentOctave,this.octaves),color:"white",key:"v",name:"f4",step:-4,position:"bottom",pressed:!1},71:{tone:"fis4",freq:e.getFreq(-3,"bottom",this.currentOctave,this.octaves),color:"black",key:"g",name:"f4#",step:-3,position:"bottom",pressed:!1},66:{tone:"g4",freq:e.getFreq(-2,"bottom",this.currentOctave,this.octaves),color:"white",key:"b",name:"g4",step:-2,position:"bottom",pressed:!1},72:{tone:"gis4",freq:e.getFreq(-1,"bottom",this.currentOctave,this.octaves),color:"black",key:"h",name:"g4#",step:-1,position:"bottom",pressed:!1},78:{tone:"a4",freq:e.getFreq(0,"bottom",this.currentOctave,this.octaves),color:"white",key:"n",name:"a4",step:0,position:"bottom",pressed:!1},74:{tone:"ais4",freq:e.getFreq(1,"bottom",this.currentOctave,this.octaves),color:"black",key:"j",name:"a4#",step:1,position:"bottom",pressed:!1},77:{tone:"h4",freq:e.getFreq(2,"bottom",this.currentOctave,this.octaves),color:"white",key:"m",name:"b4",step:2,position:"bottom",pressed:!1},188:{tone:"c5",freq:e.getFreq(3,"bottom",this.currentOctave,this.octaves),color:"white",key:",",name:"c5",step:3,position:"bottom",pressed:!1},76:{tone:"cis5",freq:e.getFreq(4,"bottom",this.currentOctave,this.octaves),color:"black",key:"l",name:"c5#",step:4,position:"bottom",pressed:!1},190:{tone:"d5",freq:e.getFreq(5,"bottom",this.currentOctave,this.octaves),color:"white",key:".",name:"d5",step:5,position:"bottom",pressed:!1},186:{tone:"dis5",freq:e.getFreq(6,"bottom",this.currentOctave,this.octaves),color:"black",key:"ö",name:"d5#",step:6,position:"bottom",pressed:!1},189:{tone:"e5",freq:e.getFreq(7,"bottom",this.currentOctave,this.octaves),color:"white",key:"-",name:"e5",step:7,position:"bottom",pressed:!1},16:{tone:"f5",freq:e.getFreq(8,"bottom",this.currentOctave,this.octaves),color:"white",key:"shift",name:"f5",step:8,position:"bottom",pressed:!1},81:{tone:"c4",freq:e.getFreq(-9,"top",this.currentOctave,this.octaves),color:"white",key:"q",name:"c4",step:-9,position:"top",pressed:!1},50:{tone:"cis4",freq:e.getFreq(-8,"top",this.currentOctave,this.octaves),color:"black",key:"2",name:"c4#",step:-8,position:"top",pressed:!1},87:{tone:"d4",freq:e.getFreq(-7,"top",this.currentOctave,this.octaves),color:"white",key:"w",name:"d4",step:-7,position:"top",pressed:!1},51:{tone:"dis4",freq:e.getFreq(-6,"top",this.currentOctave,this.octaves),color:"black",key:"3",name:"d4#",step:-6,position:"top",pressed:!1},69:{tone:"e4",freq:e.getFreq(-5,"top",this.currentOctave,this.octaves),color:"white",key:"e",name:"e4",step:-5,position:"top",pressed:!1},82:{tone:"f4",freq:e.getFreq(-4,"top",this.currentOctave,this.octaves),color:"white",key:"r",name:"f4",step:-4,position:"top",pressed:!1},53:{tone:"fis4",freq:e.getFreq(-3,"top",this.currentOctave,this.octaves),color:"black",key:"5",name:"f4#",step:-3,position:"top",pressed:!1},84:{tone:"g4",freq:e.getFreq(-2,"top",this.currentOctave,this.octaves),color:"white",key:"t",name:"g4",step:-2,position:"top",pressed:!1},54:{tone:"gis4",freq:e.getFreq(-1,"top",this.currentOctave,this.octaves),color:"black",key:"6",name:"g4#",step:-1,position:"top",pressed:!1},90:{tone:"a4",freq:e.getFreq(0,"top",this.currentOctave,this.octaves),color:"white",key:"z",name:"a4",step:0,position:"top",pressed:!1},55:{tone:"ais4",freq:e.getFreq(1,"top",this.currentOctave,this.octaves),color:"black",key:"7",name:"a4#",step:1,position:"top",pressed:!1},85:{tone:"h4",freq:e.getFreq(2,"top",this.currentOctave,this.octaves),color:"white",key:"u",name:"b4",step:2,position:"top",pressed:!1},73:{tone:"c5",freq:e.getFreq(3,"top",this.currentOctave,this.octaves),color:"white",key:"i",name:"c5",step:3,position:"top",pressed:!1},57:{tone:"cis5",freq:e.getFreq(4,"top",this.currentOctave,this.octaves),color:"black",key:"9",name:"c5#",step:4,position:"top",pressed:!1},79:{tone:"d5",freq:e.getFreq(5,"top",this.currentOctave,this.octaves),color:"white",key:"o",name:"d5",step:5,position:"top",pressed:!1},48:{tone:"dis5",freq:e.getFreq(6,"top",this.currentOctave,this.octaves),color:"black",key:"0",name:"d5#",step:6,position:"top",pressed:!1},80:{tone:"e5",freq:e.getFreq(7,"top",this.currentOctave,this.octaves),color:"white",key:"p",name:"e5",step:7,position:"top",pressed:!1},219:{tone:"f5",freq:e.getFreq(8,"top",this.currentOctave,this.octaves),color:"white",key:"ü",name:"f5",step:8,position:"top",pressed:!1}}}return e.getFreq=function(e,t,o,n){return n[o[t]]*Math.pow(s,e)},e}()},function(e,t,o){"use strict";o.r(t);var s=o(0),n=o.n(s),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"keyboard-body",attrs:{id:"keyboard"}},[o("div",{staticClass:"keyboard-body-inner"},[e._m(0),e._v(" "),o("div",{staticClass:"reverb button",on:{click:function(t){e.reverb=!e.reverb}}},[e._v("Reverb: "+e._s(e.reverb?"on":"off"))]),e._v(" "),e._l(e.order,(function(t,s){return o("div",{key:s,class:"keyboard-container "+t.position},[o("div",{staticClass:"keyboard kb-black"},e._l(t.keys,(function(t,s){return o("key",{key:s,attrs:{color:"black",num:t,data:e.getKeys[t]},on:{"start-tone":e.startTone,"stop-tone":e.stopTone}})})),1),e._v(" "),o("div",{staticClass:"keyboard kb-white"},[o("div",{staticClass:"buttons"},[o("div",{class:"button noselect oct minus"+t.position,on:{click:function(o){return e.setOctave(-1,t.position)}}},[e._v("-")]),e._v(" "),o("div",{class:"button noselect oct display"+t.position},[e._v("Oct: "+e._s(e.currentOctave[t.position]+1))]),e._v(" "),o("div",{class:"button noselect oct plus"+t.position,on:{click:function(o){return e.setOctave(1,t.position)}}},[e._v("+")]),e._v(" "),o("div",{class:"button noselect vol minus"+t.position,on:{click:function(o){return e.setVolume(-1,t.position)}}},[e._v("-")]),e._v(" "),o("div",{class:"button noselect vol display"+t.position},[e._v("Vol: "+e._s(e.maxVol[t.position]))]),e._v(" "),o("div",{class:"button noselect vol plus"+t.position,on:{click:function(o){return e.setVolume(1,t.position)}}},[e._v("+")]),e._v(" "),o("div",{class:"button noselect wave "+("sine"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("sine",t.position)}}},[e._v("sine\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("square"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("square",t.position)}}},[e._v("square\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("sawtooth"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("sawtooth",t.position)}}},[e._v("sawtooth\n          ")]),e._v(" "),o("div",{class:"button noselect wave "+("triangle"===e.waveForm[t.position]?"active ":" ")+t.position,on:{click:function(o){return e.setWaveForm("triangle",t.position)}}},[e._v("triangle\n          ")])]),e._v(" "),e._l(t.keys,(function(t,s){return o("key",{key:s,attrs:{color:"white",num:t,data:e.getKeys[t]},on:{"start-tone":e.startTone,"stop-tone":e.stopTone}})}))],2)])}))],2),e._v(" "),e._m(1)])};r._withStripped=!0;var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.color===e.allData.color?o("div",{class:"key noselect"+(e.getPressed?" highlight":""),attrs:{id:e.getAllData.tone+e.getAllData.position,"data-color":e.getAllData.color,"data-keycode":e.num},on:{touchstart:function(t){return e.startTone(e.num,e.getAllData.position)},touchend:function(t){return e.stopTone(e.num)},touchmove:function(t){return e.stopTone(e.num)},mousedown:function(t){return e.startTone(e.num,e.getAllData.position)},mouseup:function(t){return e.stopTone(e.num)},mouseleave:function(t){return e.stopTone(e.num)}}},[o("span",{staticClass:"noselect"},[e._v(e._s(e.getAllData.name)),o("br"),e._v(e._s(e.getAllData.key))])]):e._e()};i._withStripped=!0;var a={props:{num:Number,data:{},color:String},data:function(){return{pressed:!1,allData:{tone:"",freq:0,color:"",key:"",name:"",step:0,position:"",pressed:!1}}},name:"key",created(){this.allData=this.$props.data},methods:{startTone(e,t){this.$emit("start-tone",e,t)},stopTone(e){this.$emit("stop-tone",e)}},computed:{getAllData(){return this.allData},getPressed(){return this.getAllData.pressed}}};o(1);function c(e,t,o,s,n,r,i,a){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=o,l._compiled=!0),s&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):n&&(c=a?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(e,t){return c.call(t),p(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}var l=c(a,i,[],!1,null,null,null);l.options.__file="src/components/keyboard/Key.vue";var p=l.exports;o(6);let{Keyboard:u}=o(2);const h={networkError:{},extend:function(e){function t(e){function t(e,t){let o,s=e.charCodeAt(t);return t<e.length&&(s>=65&&s<=90?o=s-65:s>=97&&s<=122?o=s-71:s>=48&&s<=57?o=s+4:43===s?o=62:47===s?o=63:61!==s&&console.log("base64 encountered unexpected character code: "+s)),o}if(0===e.length||e.length%4>0)return void console.log("base64 encountered unexpected length: "+e.length);let o,s=e.match(/[=]*$/)[0].length,n=3*e.length/4-s,r=new ArrayBuffer(n),i=new Uint8Array(r),a=[],c=0,l=0;for(;c<n;){for(o=0;o<4;o+=1)a[o]=t(e,l),l+=1;i[c]=4*a[0]+Math.floor(a[1]/16),c+=1,c<n&&(i[c]=a[1]%16*16+Math.floor(a[2]/4),c+=1),c<n&&(i[c]=a[2]%4*64+a[3],c+=1)}return r}function o(t,o,s){e.decodeAudioData(o,(function(e){console.log("Finished decoding audio data."),t.buffer=e,"function"==typeof s&&null!==e&&s(t)}),(function(e){console.log("Could not decode audio data: "+e)}))}e.createReverbFromBase64=function(s,n){let r=e.createConvolver();return o(r,t(s),n),r},e.createSourceFromBase64=function(s,n){let r=e.createBufferSource();return o(r,t(s),n),r},e.createReverbFromUrl=function(t,s){console.log("Downloading impulse response from "+t);let n=e.createConvolver(),r=new XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(console.log("Downloaded impulse response"),o(n,r.response,s))},r.onerror=function(e){console.log("There was an error receiving the response: "+e),h.networkError=e},r.responseType="arraybuffer",r.send(),n},e.createSourceFromUrl=function(t,s){console.log("Downloading sound from "+t);let n=e.createBufferSource(),r=new XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(console.log("Downloaded sound"),o(n,r.response,s))},r.onerror=function(e){console.log("There was an error receiving the response: "+e),h.networkError=e},r.responseType="arraybuffer",r.send(),n},e.createReverbFromBase64Url=function(s,n){console.log("Downloading base64 impulse response from "+s);let r=e.createConvolver(),i=new XMLHttpRequest;return i.open("GET",s,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(console.log("Downloaded impulse response"),o(r,t(i.response),n))},i.onerror=function(e){console.log("There was an error receiving the response: "+e),h.networkError=e},i.send(),r},e.createSourceFromBase64Url=function(s,n){console.log("Downloading base64 sound from "+s);let r=e.createBufferSource(),i=new XMLHttpRequest;return i.open("GET",s,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(console.log("Downloaded sound"),o(r,t(i.response),n))},i.onerror=function(e){console.log("There was an error receiving the response: "+e),h.networkError=e},i.send(),r}}};var d=c({name:"keyboard",components:{Key:p},data:function(){return new u},created(){document.addEventListener("keydown",e=>{let t=e.keyCode||e.which;void 0!==this.keys[t]&&this.startTone(t,this.keys[t].position)}),document.addEventListener("keyup",e=>{let t=e.keyCode||e.which;void 0!==this.keys[t]&&this.stopTone(t)})},methods:{setOctave(e,t){this.currentOctave[t]+e<0&&(this.currentOctave[t]=0),this.currentOctave[t]+e>6&&(this.currentOctave[t]=6),this.currentOctave[t]=this.currentOctave[t]+e;for(let e in this.keys)if(this.keys.hasOwnProperty(e)){let o=this.keys[e];o.position===t&&(this.keys[e].freq=u.getFreq(o.step,t,this.currentOctave,this.octaves))}},setVolume(e,t){return this.maxVol[t]+e<1?1:this.maxVol[t]+e>10?10:void(this.maxVol[t]=this.maxVol[t]+e)},setWaveForm(e,t){this.waveForm[t]=e},stopTone(e){if(void 0===e)return;let t=this.osc[e];if("object"==typeof t){let o=this.synth.currentTime,s=t.osc;t.gain.gain.linearRampToValueAtTime(0,o+.01),s.stop(o+.02),this.osc[e]=void 0}void 0!==this.keys[e]&&(this.keys[e].pressed=!1)},startTone(e,t){if(!1===this.synthSet&&(this.synth=new(AudioContext||window.webkitAudioContext),h.extend(this.synth),this.reverbNode=this.synth.createReverbFromUrl("http://reverbjs.org/Library/HamiltonMausoleum.m4a",()=>{this.reverbNode.connect(this.synth.destination)}),this.synthSet=!0),"object"==typeof this.osc[e])return;let o={osc:this.synth.createOscillator(),gain:this.synth.createGain()};o.gain.gain.setValueAtTime(0,this.synth.currentTime),o.osc.type=this.waveForm[t],o.osc.frequency.setValueAtTime(this.keys[e].freq,this.synth.currentTime),o.osc.connect(o.gain),this.reverb?o.gain.connect(this.reverbNode):o.gain.connect(this.synth.destination),o.osc.start(),o.gain.gain.linearRampToValueAtTime(.1*this.maxVol[t],this.synth.currentTime+.01),this.osc[e]=o,void 0!==this.keys[e]&&(this.keys[e].pressed=!0)}},computed:{getKeys(){return this.keys}}},r,[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"keyboard-hl"},[this._v("...play "),t("i",[this._v("away")]),this._v("!")])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",{staticClass:"footer"},[t("span",{staticClass:"footer-content"},[this._v("\n    created with vuejs by "),t("a",{attrs:{href:"https://github.com/snakedove"}},[this._v("github/snakedove")]),this._v(" | tested with typescript\n  ")])])}],!1,null,null,null);d.options.__file="src/components/Keyboard.vue";var v=d.exports;n.a.component("Keyboard",v)},function(e,t){},,function(e,t){}]);